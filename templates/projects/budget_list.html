{% extends 'base.html' %}
{% load static %}

{% block title %}Presupuestos{% endblock %}

{% block more_css %}
<link rel="stylesheet" href="{% static 'css/datatables/bootstrap.min.css' %}">
<link rel="stylesheet" href="{% static 'css/datatables/dataTables.bootstrap.min.css' %}">
<link rel="stylesheet" href="{% static 'css/datatables/datatables.min.css' %}">
<link rel="stylesheet" href="{% static 'css/datatables/dataTables.fontAwesome.css' %}">
{% endblock %}

{% block main-class %}items-list-page{% endblock %}

{% block content %}
<div class="title-search-block">
  <div class="title-block">
    <div class="row">
      <div class="col-md-6">
        <h3 class="title"> Presupuestos 
        </h3>
        <p class="title-description"> Lista de presupuestos </p>
      </div>
    </div>
  </div>
</div>
{% if messages %}
{% for message in messages %}
<h6><p {% if message.tags %}class="text-{{ message.tags }}"{% endif %}>{{message}}</p></h6>
{% endfor %}
{% endif %}
<div class="card items card-block">
  <table id="item-table" class="table table-striped table-bordered" cellspacing="0" width="100%">
    <thead>
      <tr>
          <th>Nombre</th>
          <th>Proyecto</th>
          <th>Monto</th>
          <th>Ultima Actualizaci√≥n</th>
          <th></th>
        </tr>
    </thead>
    <tbody>
      {% for budget in budgets %}
      <tr>
        <td>{{budget}}</td>
        <td>{{budget.project}}</td>
        <td>{{budget.amount}}</td>
        <td>{{budget.update_time}}</td>
        <td>
          <div class="btn-group-vertical btn-group-sm">
            <a href="{% url 'projects:project_detail' budget.project.id %}#budget-table" class="btn btn-primary-outline btn-sm"><i class="fa fa-eye fa-lg"></i> Ver</a>
            <a href="{% url 'projects:budget_edit' budget.project.id budget.id %}" class="btn btn-primary-outline btn-sm"><i class="fa fa-pencil fa-lg"></i> Editar</a>            
            <!-- <a class="btn btn-danger-outline btn-sm" href=""> <i class="fa fa-trash-o fa-lg"></i> Borrar</a> -->
          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% if is_paginated %}
<nav class="text-xs-right">
  <ul class="pagination">
      {% if page_obj.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.previous_page_number }}">
        Prev
        </a>
      </li>
      {% endif %}
      {% with ''|center:page_obj.paginator.num_pages as range %}
        {% for _ in range %}
        <li class="page-item {% if forloop.counter == page_obj.number %}active{% endif %}">
          <a href="?page={{forloop.counter}}" class="page-link">
            {{ forloop.counter }}
          </a>
        </li>
        {% endfor %}
      {% endwith %}
      {% if page_obj.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.next_page_number }}">
        Next
        </a>
    </li>
    {% endif %}
  </ul>
</nav>
{% endif %}
{% endblock %}


{% block js %}
<script src="{% static 'js/datatables/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'js/datatables/moment.min.js' %}"></script>
<script src="{% static 'js/datatables/datatables.min.js' %}"></script>
<script src="{% static 'js/datatables/datetime-moment.js' %}"></script>
<script src="{% static 'js/datatables/dataTables.bootstrap.min.js' %}"></script>
<script>
  $(document).ready(function() {
    $.fn.dataTable.moment( 'MMM D, YYYY, h:mm a' );

    $('#item-table').DataTable( {
      responsive: "True",
      lengthMenu: [ 10, 20, 50, 100],
      language: {
        search: "Buscar",
        infoEmpty:      "No hay entradas disponibles para mostrar.",
        info:           "Mostrando _START_ a _END_ de _TOTAL_ entradas",
        lengthMenu:     "Mostrar _MENU_ entradas",
        zeroRecords:    "No se encontraron datos en esta tabla",
        paginate: {
          first:      "Primero",
          last:       "Ultimo",
          next:       "Siguiente",
          previous:   "Anterior"
        },
      }
    });
  });
</script>
{% endblock %}
